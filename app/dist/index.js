"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Footer=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,React.Component),_createClass(t,[{key:"renderRows",value:function(){var n=this,s=[],o=[];return this.props.suggestions.forEach(function(e,t){t<7?s.push(React.createElement(SuggestButton,{value:e,used:n.props.suggestionsUsed.includes(t),onClick:function(){return n.props.onClick(t)}})):o.push(React.createElement(SuggestButton,{value:e,used:n.props.suggestionsUsed.includes(t),onClick:function(){return n.props.onClick(t)}}))}),React.createElement("footer",null,React.createElement("div",null,s),React.createElement("div",null,o))}},{key:"render",value:function(){return this.renderRows()}}]),t}();function Header(e){var t=1<=e.helper?"available":"";return React.createElement("header",null,React.createElement("div",null,React.createElement("span",null,"Level ",e.level),React.createElement("a",{className:t,onClick:e.onClick},"?")))}var Main=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,React.Component),_createClass(t,[{key:"getColumnCount",value:function(){return this.props.solution[1]?this.props.solution[0].length>=this.props.solution[1].length?this.props.solution[0].length:this.props.solution[1].length:this.props.solution[0].length}},{key:"renderSolutionRows",value:function(){for(var n=this,s=0,o=[[],[]],i=0;i<=1;i++)this.props.solution[i]&&this.props.solution[i].split("").forEach(function(e){if(" "==e)o[i].push(React.createElement(SolutionSpacer,null));else{var t=null!=n.props.suggestionsUsed[s]?n.props.suggestions[n.props.suggestionsUsed[s]]:null;o[i].push(React.createElement(SolutionButton,{value:t,onClick:function(){return n.props.onClick()}})),s++}});return React.createElement("div",{id:"solution","data-cols":this.getColumnCount()},React.createElement("div",null,o[0]),React.createElement("div",null,o[1]))}},{key:"render",value:function(){return React.createElement("main",{class:this.props.correntAnswer},React.createElement("div",{id:"container"},React.createElement("div",{id:"imgQuestion",style:{backgroundImage:"url(logos/"+this.props.image+")"}}),React.createElement("div",{id:"imgSolution",style:{backgroundImage:"url(logos/"+this.props.imageSolved+")"}})),this.renderSolutionRows())}}]),t}();function SolutionButton(e){return React.createElement("a",{onClick:e.onClick},e.value)}function SolutionSpacer(e){return React.createElement("span",{className:"spacer"})}function SuccessInfo(e){return React.createElement("div",null,React.createElement("h2",null,"Congratulations"),React.createElement("p",null,"You have finished the game!"),React.createElement("a",{className:"button",onClick:e.onRestartClick},"Restart"),React.createElement("a",{className:"button",onClick:e.onExitClick},"Quit"),React.createElement("div",{className:"pyro"},React.createElement("div",{className:"before"}),React.createElement("div",{className:"after"})))}function SuggestButton(e){var t=e.used?"used":"";return React.createElement("a",{className:t,onClick:e.onClick},e.value)}var Game=function(e){function n(e){var t;return _classCallCheck(this,n),(t=_possibleConstructorReturn(this,_getPrototypeOf(n).call(this,e))).levelContent=[{},{solution:["real","madrid"],suggestions:["a","l","m","d","a","r","i","d","r","f","m","r","m","e"],image:"01.svg",imageSolved:"01s.svg"},{solution:["chelsea"],suggestions:["l","e","a","l","c","s","e","h","o","h","r","b","v","c"],image:"02.svg",imageSolved:"02s.svg"},{solution:["inter"],suggestions:["n","r","m","g","i","g","h","u","i","t","e","r","a","k"],image:"03.svg",imageSolved:"03s.svg"}],t.state={level:1,suggestionsUsed:[],helper:2,correntAnswer:null},t.checkForCookie(),t.initStateVars(),t}return _inherits(n,React.Component),_createClass(n,[{key:"checkForCookie",value:function(){if(document.cookie){var e=document.cookie.match(/level=([0-9]*)/);if(e&&e[1]){var t=1*e[1];t<=this.levelContent.length&&(this.state.level=t)}}}},{key:"initStateVars",value:function(){1<=this.state.level&&(this.state.solutionClean=this.levelContent[this.state.level].solution.join("").replace(" ",""),this.state.solutionSlots=this.state.solutionClean.length)}},{key:"handleSolutionClick",value:function(){if(1<=this.state.suggestionsUsed.length){var e=this.state;e.suggestionsUsed.pop(),e.correntAnswer=null,this.setState(e)}}},{key:"handleSuggestionClick",value:function(e){if(!this.state.suggestionsUsed.includes(e)&&this.state.suggestionsUsed.length<this.state.solutionSlots){var t=this.state;t.suggestionsUsed.push(e),this.setState(t),this.state.suggestionsUsed.length==this.state.solutionSlots&&this.checkAnswer()}}},{key:"handleHelperClick",value:function(){var e=this;if(1<=this.state.helper&&this.state.suggestionsUsed.length<this.state.solutionSlots){var s=this.state;s.suggestionsUsed=[];var t=this.state.solutionClean.split("");if(1==s.helper)var n=t.length-1;else n=Math.floor(t.length/2);t.splice(n),t.forEach(function(n){e.levelContent[e.state.level].suggestions.some(function(e,t){if(e==n)return s.suggestionsUsed.push(t),!0})}),s.helper--,this.setState(s)}}},{key:"checkAnswer",value:function(){var e=this,t=this.levelContent[this.state.level].suggestions,n="";this.state.suggestionsUsed.forEach(function(e){n+=t[e]}),n==this.state.solutionClean?(this.state.correntAnswer="correct",setTimeout(function(){e.nextLevel()},4e3)):this.state.correntAnswer="incorrect"}},{key:"nextLevel",value:function(){var e;this.state.level+1<this.levelContent.length?((e=this.state).level++,e.suggestionsUsed=[],e.helper=2,e.correntAnswer=null,this.setState(e),this.initStateVars()):((e=this.state).level=0,this.setState(e));document.cookie="level="+this.state.level+"; max-age=172800; path=/"}},{key:"handleExit",value:function(){_exitFullScreen(),document.body.className=document.body.className.replace(" isStarted","")}},{key:"componentDidMount",value:function(){this.levelContent.forEach(function(e){e.image&&((new Image).src="logos/"+e.image)})}},{key:"render",value:function(){var t=this;return 1<=this.state.level?React.createElement("div",{className:"reactContainer"},React.createElement(Header,{level:this.state.level,helper:this.state.helper,onClick:function(){return t.handleHelperClick()}}),React.createElement(Main,{image:this.levelContent[this.state.level].image,imageSolved:this.levelContent[this.state.level].imageSolved,solution:this.levelContent[this.state.level].solution,suggestions:this.levelContent[this.state.level].suggestions,suggestionsUsed:this.state.suggestionsUsed,correntAnswer:this.state.correntAnswer,onClick:function(){return t.handleSolutionClick()}}),React.createElement(Footer,{suggestions:this.levelContent[this.state.level].suggestions,suggestionsUsed:this.state.suggestionsUsed,onClick:function(e){return t.handleSuggestionClick(e)}})):React.createElement("div",{className:"reactContainer successInfo"},React.createElement(SuccessInfo,{onRestartClick:function(){return t.nextLevel()},onExitClick:function(){return t.handleExit()}}))}}]),n}();ReactDOM.render(React.createElement(Game,null),document.getElementById("game"));